!function(_){var t={};function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return _[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=_,e.c=t,e.d=function(_,t,o){e.o(_,t)||Object.defineProperty(_,t,{enumerable:!0,get:o})},e.r=function(_){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},e.t=function(_,t){if(1&t&&(_=e(_)),8&t)return _;if(4&t&&"object"==typeof _&&_&&_.__esModule)return _;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:_}),2&t&&"string"!=typeof _)for(var i in _)e.d(o,i,function(t){return _[t]}.bind(null,i));return o},e.n=function(_){var t=_&&_.__esModule?function(){return _.default}:function(){return _};return e.d(t,"a",t),t},e.o=function(_,t){return Object.prototype.hasOwnProperty.call(_,t)},e.p="",e(e.s=0)}([function(_,t,e){"use strict";e.r(t);var o=function(_){const t=document.getElementById("level"),e=document.getElementById("crash");t.innerText=_.currentLevel,e.innerText=_.countCrash};const i={barrier:"./app/front/img/shina.png",car:"./app/front/img/car.png",asphalt:"./app/front/img/road.jpg",scale:16,height:48,width:256,startSpeed:.4};var n=function(_,t){this.scale=t.scale,this.enveroment=_,this.currentLevel=0,this.road=t.asphalt,this.barrier=t.barrier,this.maxLevel=_.length,this.roadLength=_[0][0].length,this.state="pause",this.absolutePosition=0,this.width=t.width,this.countCrash=0};n.prototype.restrart=function(){this.absolutePosition=0},n.prototype.movAbsolutePosition=function(_,t){this.roadLength*this.scale-this.absolutePosition+_>this.width?this.absolutePosition+=_:t.movPositionX(_)},n.prototype.getLevel=function(){return this.enveroment[this.currentLevel]},n.prototype.fillActors=function(_){for(var t=[],e=this.getLevel(),o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++)"!"===e[o][i]&&t.push(new _(i*this.scale,o*this.scale));return t},n.prototype.CollisionCheck=function(_,t){var e=!1;return t.forEach(t=>{t.positionY===_.positionY&&this.absolutePosition+_.positionX+2*this.scale>=t.positionX&&this.absolutePosition+_.positionX<t.positionX+this.scale&&(e=!0,this.countCrash++)}),e},n.prototype.WinCheck=function(_){var t=!1;return this.absolutePosition+_.positionX+2*this.scale>=this.roadLength*this.scale&&(t=!0,this.currentLevel<this.maxLevel-1?(this.currentLevel++,_.chageMaxSpeed()):this.currentLevel+1===this.maxLevel&&(this.currentLevel=0)),t};var r=function(_){this.positionX=_.scale,this.positionY=_.scale,this.scale=_.scale,this.image=_.car,this.speed=0,this.maxSpeed=_.startSpeed,this.border=_.height};r.prototype.movPositionX=function(_){this.positionX+=_},r.prototype.movPositionY=function(_){this.positionY+_>=0&&this.positionY+_<this.border&&(this.positionY+=_)},r.prototype.chageSpeed=function(_){this.speed+_<=this.maxSpeed&&(this.speed+=_)},r.prototype.chageMaxSpeed=function(){this.maxSpeed+=.4},r.prototype.restrart=function(){this.positionX=this.scale,this.positionY=this.scale,this.speed=0};var s=function(_,t){this.positionX=_,this.positionY=t},a=new r(i),c=new n([["_______________________________________________________________________________________","__________!_________________________________________!_____________!_______________!____","______________!___________________________!_________________!____________!_____________"],["________________________!______________________!__________________!__________________!_","_______!_________!___________!_____________!_____________!____!_________!______________","_____________________!_______________!______________!_______________!__________!_______"],["____!_______!_____________________!____________!__________!___________!_________!______","________!__________!_________!____________!__________!___________!__________!__________","_______________________________________________________________________________________"]],i),h=document.querySelector("canvas").getContext("2d"),l={car:document.createElement("img"),road:document.createElement("img"),barrier:document.createElement("img")};l.road.src=c.road,l.barrier.src=c.barrier,l.car.src=a.image,l.car.addEventListener("load",function(){setInterval(function(){!function(_,t,e,i,n,r){var s=t.fillActors(n),a=t.getLevel();if(t.CollisionCheck(_,s)||t.WinCheck(_))!function(_,t){_.restrart(),t.restrart()}(_,t),o(t);else{i.clearRect(0,0,r.width,r.height),t.movAbsolutePosition(_.speed,_);for(var c=0;c<a.length;c++)for(var h=0;h<a[c].length;h++)"_"===a[c][h]?i.drawImage(e.road,h*t.scale-t.absolutePosition,c*t.scale):"!"===a[c][h]&&i.drawImage(e.barrier,h*t.scale-t.absolutePosition,c*t.scale);i.drawImage(e.car,_.positionX,_.positionY),0===_.speed?document.getElementById("start").innerText="PRESS SPACE FOR START":document.getElementById("start").innerText=Math.round(100*_.speed)+" km/h"}t.movAbsolutePosition(_.speed,_)}(a,c,l,h,s,i)},10)}),window.addEventListener("keydown",function(_){!function(_,t){"ArrowUp"===_.code?t.movPositionY(-16):"ArrowDown"===_.code?t.movPositionY(16):"Space"===_.code&&t.chageSpeed(t.maxSpeed)}(_,a)})}]);